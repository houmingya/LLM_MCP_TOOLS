# çŸ¥è¯†å›¾è°±åº”ç”¨è¯´æ˜

## ğŸ“Œ ç³»ç»Ÿæ˜¯å¦åº”ç”¨äº†çŸ¥è¯†å›¾è°±ï¼Ÿ

**å›ç­”ï¼šâœ… æ˜¯çš„ï¼Œç³»ç»Ÿå·²ç»é›†æˆäº†çŸ¥è¯†å›¾è°±åŠŸèƒ½ï¼**

ä½†æ˜¯ï¼Œç›®å‰çŸ¥è¯†å›¾è°±åŠŸèƒ½æ˜¯**è¢«åŠ¨å¼åº”ç”¨**ï¼Œè€Œéä¸»åŠ¨å¼ã€‚è¿™æ„å‘³ç€ï¼š

### âœ… å·²å®ç°çš„åŠŸèƒ½

1. **çŸ¥è¯†å›¾è°±æ„å»º** âœ“
   - ä¸Šä¼ æ–‡æ¡£æ—¶è‡ªåŠ¨æå–å®ä½“å’Œå…³ç³»
   - ä½¿ç”¨ LLM è¯†åˆ«å…¬å¸ã€äººç‰©ã€äº§å“ã€æŠ€æœ¯ç­‰å®ä½“
   - æ„å»ºå®ä½“é—´çš„å…³è”å…³ç³»å›¾

2. **çŸ¥è¯†å›¾è°±æŸ¥è¯¢å·¥å…·** âœ“ï¼ˆå·²æ³¨å†Œåˆ° MCP Serverï¼‰
   - `query_entity` - æŸ¥è¯¢ç‰¹å®šå®ä½“çš„è¯¦ç»†ä¿¡æ¯
   - `find_entity_path` - æŸ¥æ‰¾ä¸¤ä¸ªå®ä½“ä¹‹é—´çš„å…³ç³»è·¯å¾„
   - `search_entities_in_graph` - æœç´¢çŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“
   - `get_graph_statistics` - è·å–å›¾è°±ç»Ÿè®¡ä¿¡æ¯
   - `export_knowledge_graph` - å¯¼å‡ºå›¾æ•°æ®ç”¨äºå¯è§†åŒ–

3. **å¯è§†åŒ–å±•ç¤º** âœ“
   - æä¾›çŸ¥è¯†å›¾è°±å¯è§†åŒ–é¡µé¢
   - æ˜¾ç¤ºå®ä½“èŠ‚ç‚¹å’Œå…³ç³»è¾¹
   - æ”¯æŒäº¤äº’å¼æµè§ˆ

### âŒ å°šæœªå®ç°çš„åŠŸèƒ½

1. **ä¸»åŠ¨ä½¿ç”¨çŸ¥è¯†å›¾è°±** âœ—
   - å½“å‰èŠå¤©æ—¶ï¼Œå¤§æ¨¡å‹**ä¸ä¼šä¸»åŠ¨**è°ƒç”¨çŸ¥è¯†å›¾è°±å·¥å…·
   - éœ€è¦ç”¨æˆ·**æ˜ç¡®æé—®**æ‰ä¼šè§¦å‘

2. **çŸ¥è¯†å›¾è°± + å‘é‡æ£€ç´¢èåˆ** âœ—
   - æœªå®ç°çŸ¥è¯†å›¾è°±å’Œå‘é‡æ•°æ®åº“çš„è”åˆæŸ¥è¯¢
   - æœªåˆ©ç”¨å›¾ç»“æ„å¢å¼ºæœç´¢ç»“æœ

---

## ğŸ” å½“ä½ é—®é—®é¢˜æ—¶ï¼Œç³»ç»Ÿæ€ä¹ˆç”¨çŸ¥è¯†å›¾è°±ï¼Ÿ

### å½“å‰å·¥ä½œæµç¨‹

```
ç”¨æˆ·æé—®
   â†“
å¤§æ¨¡å‹ï¼ˆLLMï¼‰åˆ†æé—®é¢˜
   â†“
åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·
   â†“
â”œâ”€ å¦‚æœé—®é¢˜æ¶‰åŠ"å®ä½“æŸ¥è¯¢"ã€"å…³ç³»æŸ¥è¯¢" â†’ è°ƒç”¨çŸ¥è¯†å›¾è°±å·¥å…·
â”œâ”€ å¦‚æœé—®é¢˜æ¶‰åŠ"æ–‡æ¡£å†…å®¹" â†’ è°ƒç”¨å‘é‡æœç´¢å·¥å…·  
â”œâ”€ å¦‚æœé—®é¢˜æ¶‰åŠ"å‘˜å·¥ä¿¡æ¯" â†’ è°ƒç”¨æ•°æ®åº“å·¥å…·
â””â”€ å¦‚æœæ˜¯å¸¸è§„é—®é¢˜ â†’ ç›´æ¥å›ç­”
   â†“
è¿”å›ç»“æœç»™ç”¨æˆ·
```

### ä¼šè§¦å‘çŸ¥è¯†å›¾è°±çš„é—®é¢˜ç¤ºä¾‹

#### âœ… **ä¼šè°ƒç”¨**çŸ¥è¯†å›¾è°±çš„é—®é¢˜ï¼š

1. **å®ä½“æŸ¥è¯¢ç±»**
   ```
   â“ "å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹AIè§†é¢‘åˆ†æç³»ç»Ÿè¿™ä¸ªäº§å“çš„ä¿¡æ¯"
   â†’ è°ƒç”¨ query_entity("AIè§†é¢‘åˆ†æç³»ç»Ÿ")
   â†’ è¿”å›å®ä½“ä¿¡æ¯å’Œå…³è”å…³ç³»
   ```

2. **å…³ç³»æŸ¥è¯¢ç±»**
   ```
   â“ "AIè§†é¢‘åˆ†æç³»ç»Ÿå’Œæ™ºèƒ½è§†é¢‘åˆ†æå¹³å°æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ"
   â†’ è°ƒç”¨ find_entity_path("AIè§†é¢‘åˆ†æç³»ç»Ÿ", "æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°")
   â†’ è¿”å›å…³ç³»è·¯å¾„
   ```

3. **å®ä½“æœç´¢ç±»**
   ```
   â“ "çŸ¥è¯†å›¾è°±é‡Œæœ‰å“ªäº›å…¬å¸ï¼Ÿ"
   â†’ è°ƒç”¨ search_entities_in_graph("", entity_type="å…¬å¸/ç»„ç»‡")
   â†’ è¿”å›æ‰€æœ‰å…¬å¸ç±»å‹çš„å®ä½“
   ```

4. **ç»Ÿè®¡ç±»**
   ```
   â“ "çŸ¥è¯†å›¾è°±é‡Œæœ‰å¤šå°‘ä¸ªå®ä½“ï¼Ÿ"
   â†’ è°ƒç”¨ get_graph_statistics()
   â†’ è¿”å›èŠ‚ç‚¹æ•°ã€è¾¹æ•°ç­‰ç»Ÿè®¡ä¿¡æ¯
   ```

#### âŒ **ä¸ä¼šè°ƒç”¨**çŸ¥è¯†å›¾è°±çš„é—®é¢˜ï¼š

1. **å†…å®¹æœç´¢ç±»**ï¼ˆä¼šè°ƒç”¨å‘é‡æœç´¢ï¼‰
   ```
   â“ "æ–‡æ¡£é‡Œæåˆ°äº†ä»€ä¹ˆæŠ€æœ¯ï¼Ÿ"
   â†’ è°ƒç”¨ search_documents("æŠ€æœ¯")
   â†’ ä½¿ç”¨å‘é‡æ•°æ®åº“æœç´¢æ–‡æ¡£å†…å®¹
   ```

2. **å¸¸è§„å¯¹è¯**
   ```
   â“ "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
   â†’ ç›´æ¥è°ƒç”¨å¤©æ°” API æˆ–ç›´æ¥å›ç­”
   ```

---

## ğŸ”§ ç³»ç»Ÿæ¶æ„è¯¦è§£

### çŸ¥è¯†å›¾è°±åœ¨ç³»ç»Ÿä¸­çš„ä½ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ç”¨æˆ·ç•Œé¢ï¼ˆWeb UIï¼‰               â”‚
â”‚  - æ–‡æ¡£ä¸Šä¼ ï¼ˆå¯é€‰æ„å»ºçŸ¥è¯†å›¾è°±ï¼‰          â”‚
â”‚  - èŠå¤©å¯¹è¯                              â”‚
â”‚  - çŸ¥è¯†å›¾è°±å¯è§†åŒ–                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Web App (FastAPI + WebSocket)      â”‚
â”‚  - æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯                          â”‚
â”‚  - è°ƒç”¨ OpenAI LLM                       â”‚
â”‚  - æ ¹æ® LLM å†³ç­–è°ƒç”¨ MCP å·¥å…·            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTP (MCP åè®®)
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        MCP Server (FastMCP 2.0)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ çŸ¥è¯†å›¾è°±å·¥å…·                        â”‚ â”‚
â”‚  â”‚ - query_entity                     â”‚ â”‚
â”‚  â”‚ - find_entity_path                 â”‚ â”‚
â”‚  â”‚ - search_entities_in_graph         â”‚ â”‚
â”‚  â”‚ - get_graph_statistics             â”‚ â”‚
â”‚  â”‚ - export_knowledge_graph           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å…¶ä»–å·¥å…·                            â”‚ â”‚
â”‚  â”‚ - æ•°æ®åº“æŸ¥è¯¢                        â”‚ â”‚
â”‚  â”‚ - å‘é‡æœç´¢                          â”‚ â”‚
â”‚  â”‚ - å¤©æ°”æŸ¥è¯¢ç­‰                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ•°æ®å±‚                              â”‚
â”‚  - NetworkX å›¾æ•°æ®ï¼ˆå†…å­˜ï¼‰               â”‚
â”‚  - ChromaDB å‘é‡æ•°æ®åº“                   â”‚
â”‚  - SQLite æ•°æ®åº“                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµç¨‹

#### 1ï¸âƒ£ **æ–‡æ¡£ä¸Šä¼ æ—¶**

```
ç”¨æˆ·ä¸Šä¼ æ–‡æ¡£
   â†“
æå–æ–‡æœ¬å†…å®¹
   â†“
åˆ†å—ï¼ˆchunksï¼‰
   â†“
â”œâ”€ å­˜å…¥ ChromaDBï¼ˆå‘é‡æ£€ç´¢ï¼‰
â””â”€ è°ƒç”¨ build_knowledge_graphï¼ˆå¦‚æœå‹¾é€‰ï¼‰
      â†“
   LLM æå–å®ä½“å’Œå…³ç³»
      â†“
   æ„å»º NetworkX å›¾
      â†“
   å­˜å‚¨åœ¨ MCP Server å†…å­˜ä¸­
```

#### 2ï¸âƒ£ **ç”¨æˆ·æé—®æ—¶**

```
ç”¨æˆ·å‘é€é—®é¢˜
   â†“
Web App è°ƒç”¨ OpenAI LLM
   â†“
LLM åˆ†æé—®é¢˜ï¼Œå†³å®šæ˜¯å¦è°ƒç”¨å·¥å…·
   â†“
å¦‚æœéœ€è¦ï¼šç”Ÿæˆ Function Calling è¯·æ±‚
   â†“
Web App é€šè¿‡ MCP Client è°ƒç”¨å·¥å…·
   â†“
MCP Server æ‰§è¡Œå¯¹åº”çš„å·¥å…·å‡½æ•°
   â†“
â”œâ”€ query_entity â†’ ä» NetworkX å›¾æŸ¥è¯¢å®ä½“
â”œâ”€ search_documents â†’ ä» ChromaDB æœç´¢æ–‡æ¡£
â””â”€ query_employee_by_id â†’ ä» SQLite æŸ¥è¯¢å‘˜å·¥
   â†“
è¿”å›ç»“æœç»™ LLM
   â†“
LLM æ•´ç†ç»“æœï¼Œç”Ÿæˆå›ç­”
   â†“
è¿”å›ç»™ç”¨æˆ·
```

---

## ğŸ’¡ å®é™…ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæŸ¥è¯¢å®ä½“ä¿¡æ¯

**ç”¨æˆ·é—®é¢˜ï¼š**
```
AIè§†é¢‘åˆ†æç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿ
```

**ç³»ç»Ÿå¤„ç†æµç¨‹ï¼š**

1. **LLM åˆ†æ** â†’ è¯†åˆ«ä¸ºå®ä½“æŸ¥è¯¢
2. **å·¥å…·è°ƒç”¨** â†’ `query_entity("AIè§†é¢‘åˆ†æç³»ç»Ÿ")`
3. **å·¥å…·æ‰§è¡Œ** â†’ ä»çŸ¥è¯†å›¾è°±æŸ¥è¯¢è¯¥å®ä½“
4. **è¿”å›ç»“æœï¼š**
   ```json
   {
     "entity": {
       "name": "AIè§†é¢‘åˆ†æç³»ç»Ÿ",
       "type": "äº§å“/æœåŠ¡",
       "description": "é’ˆå¯¹ç…¤çŸ¿'å®¢è½¦æ€»ç«™è§†é¢‘ç›‘æ§çš„æ™ºèƒ½åŒ–ç›‘æ§ç³»ç»Ÿ"
     },
     "relations": [
       {"relation": "åŒ…å«", "target": "æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°"},
       {"relation": "ä½¿ç”¨", "target": "äººå·¥æ™ºèƒ½"},
       {"relation": "åº”ç”¨äº", "target": "ç…¤çŸ¿"}
     ]
   }
   ```
5. **LLM æ•´ç†** â†’ ç”Ÿæˆå‹å¥½çš„å›ç­”
6. **ç”¨æˆ·çœ‹åˆ°ï¼š**
   ```
   AIè§†é¢‘åˆ†æç³»ç»Ÿæ˜¯ä¸€ä¸ªé’ˆå¯¹ç…¤çŸ¿å®¢è½¦æ€»ç«™è§†é¢‘ç›‘æ§çš„æ™ºèƒ½åŒ–äº§å“ã€‚
   å®ƒåŒ…å«æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°ï¼Œä½¿ç”¨äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œä¸»è¦åº”ç”¨äºç…¤çŸ¿åœºæ™¯ã€‚
   ```

### ç¤ºä¾‹ 2ï¼šæŸ¥æ‰¾å®ä½“å…³ç³»

**ç”¨æˆ·é—®é¢˜ï¼š**
```
AIè§†é¢‘åˆ†æç³»ç»Ÿå’ŒçŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ªæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
```

**ç³»ç»Ÿå¤„ç†æµç¨‹ï¼š**

1. **LLM åˆ†æ** â†’ è¯†åˆ«ä¸ºå…³ç³»æŸ¥è¯¢
2. **å·¥å…·è°ƒç”¨** â†’ `find_entity_path("AIè§†é¢‘åˆ†æç³»ç»Ÿ", "çŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ª")`
3. **å·¥å…·æ‰§è¡Œ** â†’ ä½¿ç”¨å›¾ç®—æ³•æŸ¥æ‰¾æœ€çŸ­è·¯å¾„
4. **è¿”å›ç»“æœï¼š**
   ```json
   {
     "path": [
       "AIè§†é¢‘åˆ†æç³»ç»Ÿ",
       "æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°",
       "çŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ª"
     ],
     "relations": [
       {"source": "AIè§†é¢‘åˆ†æç³»ç»Ÿ", "relation": "åŒ…å«", "target": "æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°"},
       {"source": "æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°", "relation": "ä½¿ç”¨", "target": "çŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ª"}
     ]
   }
   ```
5. **ç”¨æˆ·çœ‹åˆ°ï¼š**
   ```
   AIè§†é¢‘åˆ†æç³»ç»ŸåŒ…å«æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°ï¼Œ
   è€Œæ™ºèƒ½è§†é¢‘åˆ†æå¹³å°ä½¿ç”¨çŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ªä½œä¸ºç¡¬ä»¶è®¾å¤‡ã€‚
   ```

### ç¤ºä¾‹ 3ï¼šæœç´¢ç‰¹å®šç±»å‹å®ä½“

**ç”¨æˆ·é—®é¢˜ï¼š**
```
çŸ¥è¯†å›¾è°±é‡Œæœ‰å“ªäº›äº§å“ï¼Ÿ
```

**ç³»ç»Ÿå¤„ç†æµç¨‹ï¼š**

1. **LLM åˆ†æ** â†’ è¯†åˆ«ä¸ºå®ä½“æœç´¢
2. **å·¥å…·è°ƒç”¨** â†’ `search_entities_in_graph("", entity_type="äº§å“/æœåŠ¡")`
3. **è¿”å›ç»“æœï¼š**
   ```json
   {
     "entities": [
       {"name": "AIè§†é¢‘åˆ†æç³»ç»Ÿ", "type": "äº§å“/æœåŠ¡"},
       {"name": "æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°", "type": "äº§å“/æœåŠ¡"},
       {"name": "çŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ª", "type": "äº§å“/æœåŠ¡"},
       {"name": "çŸ¿ç”¨éš”çˆ†å‹æ‘„åƒä»ª", "type": "äº§å“/æœåŠ¡"}
     ]
   }
   ```
4. **ç”¨æˆ·çœ‹åˆ°ï¼š**
   ```
   çŸ¥è¯†å›¾è°±ä¸­æœ‰ä»¥ä¸‹äº§å“ï¼š
   1. AIè§†é¢‘åˆ†æç³»ç»Ÿ
   2. æ™ºèƒ½è§†é¢‘åˆ†æå¹³å°
   3. çŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ª
   4. çŸ¿ç”¨éš”çˆ†å‹æ‘„åƒä»ª
   ```

---

## ğŸš€ å¦‚ä½•æ”¹è¿›ï¼šä¸»åŠ¨ä½¿ç”¨çŸ¥è¯†å›¾è°±

### å½“å‰é—®é¢˜

- ç”¨æˆ·å¿…é¡»**æ˜ç¡®æé—®**æ‰ä¼šè§¦å‘çŸ¥è¯†å›¾è°±æŸ¥è¯¢
- å¦‚æœç”¨æˆ·é—®"æ–‡æ¡£é‡Œæåˆ°äº†ä»€ä¹ˆæŠ€æœ¯ï¼Ÿ"ï¼Œç³»ç»Ÿåªä¼šç”¨å‘é‡æœç´¢ï¼Œä¸ä¼šç”¨çŸ¥è¯†å›¾è°±

### æ”¹è¿›æ–¹æ¡ˆ 1ï¼šå¢å¼º System Prompt

ä¿®æ”¹ `web_app/main.py` ä¸­çš„ system promptï¼š

```python
{
    "role": "system",
    "content": """ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥ä½¿ç”¨å„ç§å·¥å…·æ¥å¸®åŠ©ç”¨æˆ·å®Œæˆä»»åŠ¡ã€‚

å¯ç”¨å·¥å…·ç±»åˆ«ï¼š
1. çŸ¥è¯†å›¾è°±å·¥å…·ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰ï¼š
   - query_entity: æŸ¥è¯¢å®ä½“è¯¦ç»†ä¿¡æ¯å’Œå…³ç³»
   - find_entity_path: æŸ¥æ‰¾ä¸¤ä¸ªå®ä½“ä¹‹é—´çš„å…³ç³»è·¯å¾„
   - search_entities_in_graph: æœç´¢ç‰¹å®šç±»å‹çš„å®ä½“
   
2. çŸ¥è¯†åº“å·¥å…·ï¼š
   - search_documents: æœç´¢æ–‡æ¡£å†…å®¹ï¼ˆç”¨äºæŸ¥æ‰¾è¯¦ç»†æè¿°ï¼‰
   
3. æ•°æ®åº“å·¥å…·ï¼šæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯

ã€é‡è¦ã€‘å½“ç”¨æˆ·è¯¢é—®å®ä½“ã€å…³ç³»ã€å…¬å¸ã€äº§å“æ—¶ï¼š
1. ä¼˜å…ˆä½¿ç”¨çŸ¥è¯†å›¾è°±å·¥å…·æŸ¥è¯¢ç»“æ„åŒ–ä¿¡æ¯
2. å¦‚æœéœ€è¦è¯¦ç»†å†…å®¹ï¼Œå†ä½¿ç”¨ search_documents
3. ç»“åˆä¸¤ç§å·¥å…·çš„ç»“æœï¼Œæä¾›å®Œæ•´ç­”æ¡ˆ

ç¤ºä¾‹ï¼š
- ç”¨æˆ·é—®"AIè§†é¢‘åˆ†æç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"
  æ­¥éª¤1: è°ƒç”¨ query_entity("AIè§†é¢‘åˆ†æç³»ç»Ÿ") è·å–å®ä½“ä¿¡æ¯
  æ­¥éª¤2: è°ƒç”¨ search_documents("AIè§†é¢‘åˆ†æç³»ç»Ÿ") è·å–è¯¦ç»†æè¿°
  æ­¥éª¤3: ç»¼åˆä¸¤è€…å›ç­”

è¯·æ ¹æ®ç”¨æˆ·çš„é—®é¢˜ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·æ¥å®Œæˆä»»åŠ¡ã€‚"""
}
```

### æ”¹è¿›æ–¹æ¡ˆ 2ï¼šå®ç°æ··åˆæ£€ç´¢

åˆ›å»ºä¸€ä¸ªæ–°å·¥å…· `hybrid_search`ï¼ŒåŒæ—¶æŸ¥è¯¢çŸ¥è¯†å›¾è°±å’Œå‘é‡æ•°æ®åº“ï¼š

```python
@mcp.tool()
def hybrid_search(query: str, search_type: str = "auto") -> Dict[str, Any]:
    """
    æ··åˆæ£€ç´¢ï¼šåŒæ—¶æŸ¥è¯¢çŸ¥è¯†å›¾è°±å’Œå‘é‡æ•°æ®åº“
    
    Args:
        query: æŸ¥è¯¢å†…å®¹
        search_type: æ£€ç´¢ç±»å‹ï¼Œ"entity"ï¼ˆå®ä½“ï¼‰ã€"content"ï¼ˆå†…å®¹ï¼‰ã€"auto"ï¼ˆè‡ªåŠ¨ï¼‰
    
    Returns:
        ç»¼åˆæ£€ç´¢ç»“æœ
    """
    results = {
        "entities": [],  # çŸ¥è¯†å›¾è°±å®ä½“
        "documents": [], # æ–‡æ¡£ç‰‡æ®µ
        "relations": []  # ç›¸å…³å…³ç³»
    }
    
    # 1. æœç´¢çŸ¥è¯†å›¾è°±
    entities = knowledge_graph_tools.search_entities(query)
    results["entities"] = entities
    
    # 2. æœç´¢å‘é‡æ•°æ®åº“
    docs = knowledge_tools.search_documents(query)
    results["documents"] = docs
    
    # 3. å¦‚æœæ‰¾åˆ°å®ä½“ï¼Œè·å–å…¶å…³ç³»
    if entities:
        for entity in entities[:3]:  # åªå–å‰3ä¸ª
            relations = knowledge_graph_tools.query_entity(entity["name"])
            results["relations"].extend(relations.get("relations", []))
    
    return results
```

### æ”¹è¿›æ–¹æ¡ˆ 3ï¼šçŸ¥è¯†å›¾è°±å¢å¼ºæ£€ç´¢ï¼ˆRAG+KGï¼‰

åœ¨ `search_documents` æ—¶ï¼Œè‡ªåŠ¨å…³è”çŸ¥è¯†å›¾è°±ï¼š

```python
def enhanced_search(query: str, top_k: int = 5):
    """
    å¢å¼ºæœç´¢ï¼šå‘é‡æ£€ç´¢ + çŸ¥è¯†å›¾è°±æ‰©å±•
    """
    # 1. å‘é‡æ£€ç´¢
    doc_results = search_documents(query, top_k)
    
    # 2. æå–æ–‡æ¡£ä¸­çš„å®ä½“ï¼ˆNERï¼‰
    entities_in_docs = extract_entities_from_text(doc_results)
    
    # 3. ä»çŸ¥è¯†å›¾è°±æŸ¥è¯¢è¿™äº›å®ä½“çš„å…³ç³»
    graph_context = []
    for entity in entities_in_docs:
        entity_info = query_entity(entity)
        graph_context.append(entity_info)
    
    # 4. åˆå¹¶ç»“æœ
    return {
        "documents": doc_results,
        "graph_context": graph_context
    }
```

---

## ğŸ“Š æ€»ç»“

### âœ… ç³»ç»Ÿå·²æœ‰çš„çŸ¥è¯†å›¾è°±åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| çŸ¥è¯†å›¾è°±æ„å»º | âœ… | ä¸Šä¼ æ–‡æ¡£æ—¶è‡ªåŠ¨æå–å®ä½“å’Œå…³ç³» |
| å®ä½“æŸ¥è¯¢ | âœ… | `query_entity` å·¥å…· |
| å…³ç³»æŸ¥è¯¢ | âœ… | `find_entity_path` å·¥å…· |
| å®ä½“æœç´¢ | âœ… | `search_entities_in_graph` å·¥å…· |
| ç»Ÿè®¡ä¿¡æ¯ | âœ… | `get_graph_statistics` å·¥å…· |
| å¯è§†åŒ– | âœ… | ç½‘é¡µå±•ç¤ºçŸ¥è¯†å›¾è°± |

### ğŸ”„ éœ€è¦æ”¹è¿›çš„åœ°æ–¹

| æ”¹è¿›ç‚¹ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|--------|------|--------|
| ä¸»åŠ¨è°ƒç”¨çŸ¥è¯†å›¾è°± | âŒ | â­â­â­ |
| æ··åˆæ£€ç´¢ï¼ˆKG+å‘é‡ï¼‰ | âŒ | â­â­â­ |
| System Prompt ä¼˜åŒ– | âŒ | â­â­ |
| çŸ¥è¯†å›¾è°±æŒä¹…åŒ– | âŒ | â­â­ |
| å®ä½“é“¾æ¥ï¼ˆEntity Linkingï¼‰ | âŒ | â­ |

### ğŸ¯ æ ¸å¿ƒé—®é¢˜

**å½“å‰ï¼š** çŸ¥è¯†å›¾è°±æ˜¯**å¯ç”¨**çš„ï¼Œä½†éœ€è¦ç”¨æˆ·**æ˜ç¡®è¯·æ±‚**æ‰ä¼šè§¦å‘  
**ç†æƒ³ï¼š** ç³»ç»Ÿåº”è¯¥**æ™ºèƒ½åˆ¤æ–­**ä½•æ—¶ä½¿ç”¨çŸ¥è¯†å›¾è°±ï¼Œè‡ªåŠ¨ç»“åˆå‘é‡æ£€ç´¢å’Œå›¾æŸ¥è¯¢

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### æµ‹è¯•çŸ¥è¯†å›¾è°±åŠŸèƒ½

1. **ä¸Šä¼ æ–‡æ¡£å¹¶æ„å»ºå›¾è°±**
   - å‹¾é€‰"æ„å»ºçŸ¥è¯†å›¾è°±"
   - æŸ¥çœ‹æ—¥å¿—ç¡®è®¤å®ä½“å’Œå…³ç³»è¢«æå–

2. **æµ‹è¯•å®ä½“æŸ¥è¯¢**
   ```
   æé—®: "æŸ¥è¯¢ä¸€ä¸‹AIè§†é¢‘åˆ†æç³»ç»Ÿçš„ä¿¡æ¯"
   é¢„æœŸ: è°ƒç”¨ query_entity å·¥å…·ï¼Œè¿”å›å®ä½“è¯¦æƒ…
   ```

3. **æµ‹è¯•å…³ç³»æŸ¥è¯¢**
   ```
   æé—®: "AIè§†é¢‘åˆ†æç³»ç»Ÿå’ŒçŸ¿ç”¨æœ¬å®‰å‹æ‘„åƒä»ªæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ"
   é¢„æœŸ: è°ƒç”¨ find_entity_path å·¥å…·ï¼Œè¿”å›å…³ç³»è·¯å¾„
   ```

4. **æµ‹è¯•å®ä½“æœç´¢**
   ```
   æé—®: "çŸ¥è¯†å›¾è°±é‡Œæœ‰å“ªäº›äº§å“ï¼Ÿ"
   é¢„æœŸ: è°ƒç”¨ search_entities_in_graph å·¥å…·
   ```

5. **è®¿é—®å¯è§†åŒ–é¡µé¢**
   - æ‰“å¼€ `http://localhost:8000/knowledge-graph-simple`
   - æŸ¥çœ‹å®ä½“å’Œå…³ç³»çš„å›¾å½¢å±•ç¤º

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `docs/çŸ¥è¯†å›¾è°±æµ‹è¯•è¯´æ˜.md` - æµ‹è¯•æŒ‡å—
- `docs/çŸ¥è¯†å›¾è°±JSONè§£æä¿®å¤.md` - é—®é¢˜ä¿®å¤è®°å½•
- `docs/çŸ¥è¯†å›¾è°±å…³ç³»ç¼ºå¤±å®ä½“é—®é¢˜.md` - æ•°æ®è´¨é‡é—®é¢˜
- `docs/çŸ¥è¯†å›¾è°±è¿›åº¦æç¤ºä¸æ§åˆ¶.md` - ç”¨æˆ·ä½“éªŒä¼˜åŒ–

å¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥é˜…ç›¸å…³æ–‡æ¡£æˆ–è”ç³»å¼€å‘è€…ã€‚
